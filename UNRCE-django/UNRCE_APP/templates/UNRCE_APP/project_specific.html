{% extends "UNRCE_APP/base.html" %}
{% load static %}

{% block content %}
<style>/* Table Styles */
    .user-interest-table {
        width: 100%; /* Ensures the container takes up the full width */
        text-align: left; /* Left-aligns the content of the container (including the table) */
    }
    
    .user-interest-table table {
        width: auto; /* Let the table take only as much width as required for the content */
        border-collapse: collapse; /* Removes double borders */
        color: #000;  /* Black text color for the whole table */
    }
    
    /* Table Headers */
    .user-interest-table th {
        background-color: #5775ac;  /* Dark background */
        color: #fff;  /* White text */
        padding: 10px;
        text-align: center;  /* Center-aligned text */
    }
    
    /* Table Cells */
    .user-interest-table td {
        padding: 10px;  /* Adds some spacing around the content in cells */
        border: 1px solid #ddd;  /* Light border around cells */
        text-align: left;  /* Left-aligned text in cells */
    }
    
    /* Even Rows (for zebra-striping) */
    .user-interest-table tr:nth-child(even) {
        background-color: #f2f2f2;  /* Light gray background */
    }
    
    /* Hover effect */
    .user-interest-table tr:hover {
        background-color: #e9e9e9;  /* Slightly darker background when hovering over a row */
    }
    
    /* Button Styles */
    button {
        margin: 10px 0; /* Some margin around the button */
        padding: 8px 12px; /* Some padding */
        cursor: pointer; /* Hand cursor on hover */
        color: #000; /* Black text color for buttons */
    }
    </style>
<div class="information">

    <h1> {{ project.id }} </h1>
    <div class="project-container">
        <img class="image" id="detailImage" src="{{ img_src }}" alt="Project Image">
        <div class="project-details">
            <h2 class=""id="projectTitle">{{ project.title }}</h2>
            <h2> {{ project.id }} </h2>
            <div class="info-container">
                <p>{{ project.description }}</p>
            </div>
        </div>
        <div class="region-container">
            <h5 class="region-title">Audience</h5>
            <div class="region">
                <p>{{ project.audience }}</p>
            </div>
        </div> 
        <div class="region-container">
            <h5 class="region-title">Delivery Frequency</h5>
            <div class="region">
                <p>{{ project.delivery_frequency }}</p>
            </div>
        </div>
        

    </div>
</div>

<div class="user-interest-table">
    <!-- Button to toggle the table visibility -->
    <button onclick="toggleTableVisibility()">Show Interested Users</button>
    
    <!-- Hidden table that can be toggled via button click -->
    <div id="interestTable" style="display: none;">
        <h5>Interested Users</h5>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone Number</th>
                </tr>
            </thead>
            <tbody>
                <!-- Hardcoded Rows for Visualization -->
                <tr>
                    <td>John Doe</td>
                    <td>johndoe@example.com</td>
                    <td>123-456-7890</td>
                </tr>
                <tr>
                    <td>Jane Smith</td>
                    <td>janesmith@example.com</td>
                    <td>987-654-3210</td>
                </tr>
                <tr>
                    <td>Robert Johnson</td>
                    <td>robertj@example.com</td>
                    <td>456-789-0123</td>
                </tr>
                
                <!-- Dynamically Loaded Data -->
                {% for user in interested_users %}
                <tr>
                    <td>{{ user.name }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.phone }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if user.is_superuser %}
    <!-- Approve a project button -->
    <form method="post" action="{% url 'UNRCE_APP:approve_project' project.id %}">
        {% csrf_token %}
        <button type="submit">Approve</button>
    </form>
    <form method="post" action="{% url 'UNRCE_APP:reject_project' project.id %}">
        {% csrf_token %}
        <button type="submit">Reject</button>
    </form>
    <form method="post" action="{% url 'UNRCE_APP:make_pending_project' project.id %}">
        {% csrf_token %}
        <button type="submit">Make pending</button>
    </form>
    

    {% endif %}

</div>

<script src="{% static 'UNRCE_APP/projects.js' %}"></script>
<script>
    function toggleTableVisibility() {
        var table = document.getElementById('interestTable');
        if (table.style.display === "none") {
            table.style.display = "block";
        } else {
            table.style.display = "none";
        }
    }
</script>

{% endblock content %}
