{% extends "UNRCE_APP/base.html" %}
{% load static %}
{% block content %}


<form method="post">
  {% csrf_token %}
 
 <div class="tab">
    <button class="tablinks" data-tabname="Tab1" id="defaultOpen">General</button>
    <button class="tablinks" data-tabname="Tab2">Location</button>
    <button class="tablinks" data-tabname='Tab3'>Contents</button>
    <button class="tablinks" data-tabname='Tab4'>SDG</button>
    <button class="tablinks" data-tabname='Tab5'>ESD</button>
    <button class="tablinks" data-tabname='Tab6'>Submit</button>

  </div>
    
  <div id="Tab1" class="tabcontent">
    <div class="pr-container">
        <div class="project-details-edit">
            <div class="label-section">
                <label for="title">Project Title:</label>
                <input type="text" id="title" name="title">
            </div>
            <div class="image-section">
                <label for="imageUpload">
                    <img class="image" id="uploadedImage" src="{% static 'images/Font_1._.png' %}" alt="Default Image">
                </label>
                <!--<span class="upload-text">Add Project Image</span>-->
                <input type="file" id="imageUpload" name="imageUpload" style="display: none;" onchange="displayImage(this)">
            </div>
        </div>
    </div>
      


        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" cols="50"></textarea>
        
        <label for="language">Language:</label>
        <input type="text" id="language" name="language">
        
        <label for="web_link">Web Link:</label>
        <input type="text" id="web_link" name="web_link">
        
        <label for="policy_link">Policy Link:</label>
        <input type="text" id="policy_link" name="policy_link">
        
  </div>


  <div id="Tab2" class="tabcontent">

    
    <!-- Form fields for Tab 2 -->

        <label class="form_header">Target Audience:</label>
        
        {% for option in audience_options %}
            <input type="checkbox" id="{{ option.id }}" name="audience-options" value="{{ option.id }}">
            <label for="{{ option.id }}">{{ option.name }}</label><br>
        {% endfor %}

        <label class="form_header">Delivery Frequency:</label>
        {% for option in delivery_frequency_options %}
            <input type="radio" id="{{ option.id }}" name="delivery_frequency" value="{{ option.id }}">
            <label for="{{ option.id }}">{{ option.name }}</label><br>
        {% endfor %}
        


        
</div>


<div id="Tab3" class="tabcontent">
    
        <label for="results">Results:</label>
        <textarea id="results" name="results" rows="2" cols="50"></textarea>
        
        <label for="lessons_learned">Lessons Learned:</label>
        <textarea id="lessons_learned" name="lessons_learned" rows="2" cols="50"></textarea>
        
        <label for="key_messages">Key Messages:</label>
        <input type="text" id="key_messages" name="key_messages">
        
        <label for="relationship_to_rce_activities">Relationship to RCE Activities:</label>
        <textarea id="relationship_to_rce_activities" name="relationship_to_rce_activities" rows="2" cols="50"></textarea>
        
        <label for="funding">Funding:</label>
        <textarea id="funding" name="funding" rows="2" cols="50"></textarea>
    
</div>

<div id="Tab4" class="tabcontent">
    <!-- SDG -->
              <label for="sdgs">Choose the related Sustainable Development Goals from the following:</label>
              <div id="sdgs-selection">
                {% for sdg in sdgs %}
                <div class="sdg-item">
                  <div class="sdg-name">
                    <p>{{ sdg }}</p>
                  </div>
                  <div class="sdg-options">
                    <label class="sdg-option-label" for="sdg_relationship_{{ sdg }}_indirect">Indirect</label>
                    <input type="radio" id="sdg_relationship_{{ sdg }}_indirect" name="sdg_relationship_{{ sdg }}" value="indirect">
                    <label class="sdg-option-label" for="sdg_relationship_{{ sdg }}_direct">Direct</label>
                    <input type="radio" id="sdg_relationship_{{ sdg }}_direct" name="sdg_relationship_{{ sdg }}" value="direct">
                  </div>
                </div>
                {% endfor %}
              </div>
          </div>


          



<div id="Tab5" class="tabcontent">
    <!-- ESD and PAA -->

    <label for="esdThemes">Choose the Activities from the following:</label>
    <div id="sdgs-selection">
        {% for option in esd_themes %}
        <div class="sdg-item">
            <div class="sdg-name">
                <p>{{ option.name }}</p>
            </div>
            <div class="sdg-option">
                <label class="sdg-option-label" for="{{ option.id }}_indirect">Indirect</label>
                <input type="radio" id="{{ option.id }}_indirect" name="{{ option.id }}" value="indirect">
                <label class="sdg-option-label" for="{{ option.id }}_direct">Direct</label>
                <input type="radio" id="{{ option.id }}_direct" name="{{ option.id }}" value="direct">
            </div>
        </div>
        {% endfor %}
    </div>


    <label for="esdOptions">Choose the Activities from the following:</label>
    <div id="sdgs-selection">
        {% for option in esd_options %}
        <div class="sdg-item">
            <div class="sdg-name">
                <p>{{ option.name }}</p>
            </div>
            <div class="sdg-option">
                <label class="sdg-option-label" for="{{ option.id }}_indirect">Indirect</label>
                <input type="radio" id="{{ option.id }}_indirect" name="{{ option.id }}" value="indirect">
                <label class="sdg-option-label" for="{{ option.id }}_direct">Direct</label>
                <input type="radio" id="{{ option.id }}_direct" name="{{ option.id }}" value="direct">
            </div>
        </div>
        {% endfor %}
    </div>


</div>


<div id="Tab6" class="tabcontent">
    <!-- last page of the form for submission
    add functionality to the submit button -->

        <p>Terms and Conditions</p>
        <label for="terms_and_conditions" style = "font-size: 14px; ">
            Personal data provided under this form will be processed by UNU in accordance with the UNU Policy on Personal Data Protection. Your information and personal
            data will strictly be used for the purpose of payment processing and will be held in confidence. Access to your information and personal data is strictly limited to
            UNU’s authorized employees and agents on a “need-to-know” basis. UNU will retain your personal data only for the period necessary, unless UNU has an
            obligation to preserve your personal data for administrative, fiscal, legal, scientific, historical or informational value, or otherwise in accordance with UNU’s
            retention policies. Further details are available here. Any information about the processing of personal data and how to request access, verification, rectification
            and/or deletion of personal data may be addressed to: Aya Yokoi, Data Protection Focal Point at UNU-IAS, at yokoi@unu.edu
        </label>
        
        <!-- Add a checkbox for accepting terms and conditions -->
        <input type="checkbox" id="terms_and_conditions" name="terms_and_conditions" required>
        <label for="terms_and_conditions">I accept the terms and conditions</label>
        
        <input type="submit" value="Submit" class="submit-button" style="color:white; " value="Add Project">
     
      </div>


      
      <div class="navigation-buttons">
        <button class="tabnav" id="prevBtn">←</button>
<button class="tabnav" id="nextBtn">→</button>

      </div>
      
      
</form>


  <script>
    
    document.addEventListener('DOMContentLoaded', function() {
    function openTab(evt) {
        // Hide all tab contents
        const tabContents = document.querySelectorAll('.tabcontent');
        tabContents.forEach(content => content.style.display = 'none');

        // Remove active class from all tab links
        const tabLinks = document.querySelectorAll('.tablinks');
        tabLinks.forEach(link => link.classList.remove('active'));

        // Show the clicked tab's content and set its link as active
        const tabName = evt.currentTarget.dataset.tabname;
        document.getElementById(tabName).style.display = 'block';
        evt.currentTarget.classList.add('active');
    }

    const tabLinks = document.querySelectorAll('.tablinks');
    
    // Attach the openTab function to each tab link
    tabLinks.forEach(link => link.addEventListener('click', openTab));
    
    // Set the first tab as default
    document.querySelector('#defaultOpen').click();
});


document.addEventListener('DOMContentLoaded', function() {
  let currentTab = 0;  // Start at the first tab

  function openTab(evt) {
      // Hide all tab contents
      const tabContents = document.querySelectorAll('.tabcontent');
      tabContents.forEach(content => content.style.display = 'none');

      // Remove active class from all tab links
      const tabLinks = document.querySelectorAll('.tablinks');
      tabLinks.forEach(link => link.classList.remove('active'));

      // Show the clicked tab's content and set its link as active
      const tabName = evt.currentTarget.dataset.tabname;
      document.getElementById(tabName).style.display = 'block';
      evt.currentTarget.classList.add('active');
  }

  function showTab(n) {
      const tabLinks = document.querySelectorAll('.tablinks');
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");

      if (n >= tabLinks.length) {
          n = tabLinks.length - 1;  // prevent going beyond the last tab
      } else if (n < 0) {
          n = 0;  // prevent going before the first tab
      }

      tabLinks[n].click();
      currentTab = n;

      // Control button visibility based on current tab
      prevBtn.style.display = (currentTab === 0) ? 'none' : 'inline-block';
      nextBtn.style.display = (currentTab === tabLinks.length - 1) ? 'none' : 'inline-block';
  }

  const tabLinks = document.querySelectorAll('.tablinks');
  
  // Attach the openTab function to each tab link
  tabLinks.forEach((link, index) => {
      link.addEventListener('click', function(evt) {
          openTab(evt);
          currentTab = index;  // Update the current tab index
          showTab(currentTab); // Update buttons based on new tab
      });
  });

  // Set the first tab as default
  document.querySelector('#defaultOpen').click();

  document.getElementById("prevBtn").addEventListener("click", function() {
      showTab(currentTab - 1);
  });

  document.getElementById("nextBtn").addEventListener("click", function() {
      showTab(currentTab + 1);
  });
});

function displayImage(inputElement) {
  const file = inputElement.files[0];
  if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
          const imageElement = document.getElementById('uploadedImage');
          imageElement.src = e.target.result;
      }
      reader.readAsDataURL(file);
  }
}



function displayImage(inputElement) {
  const file = inputElement.files[0];
  if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
          const imageElement = document.getElementById('uploadedImage');
          imageElement.src = e.target.result;
      }
      reader.readAsDataURL(file);
  }
}


</script>
{% endblock %}


